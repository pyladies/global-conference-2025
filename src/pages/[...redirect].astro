---
import LocaleRedirect from "../components/ui/localeredirect.astro";

export async function getStaticPaths() {
  const pages = import.meta.glob('./en/**/*.astro', { eager: true });
  const topLevel = Object.keys(pages)
    .map(path => path.split('/').pop()?.replace('.astro', ''))
    .filter(Boolean);
  return topLevel.map((p) => ({ params: { redirect: p } }));
}

const { redirect } = Astro.params;
const pathTemplate = `/{lang}/${redirect}`;
---

<LocaleRedirect pathTemplate={pathTemplate} />
