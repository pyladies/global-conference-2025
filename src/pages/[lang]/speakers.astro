---
import Container from "@components/container.astro";
import SpeakersComponent from "@components/speakers.astro";
import Sectionhead from "@components/sectionhead.astro";
import speakerData from "../../data/speakers.json";
import submissionsData from "../../data/sessions.json";
import Layout from "@layouts/Layout.astro";
import KeynoteComponent from "@components/keynotes.astro";

import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import { getLocaleStaticPaths } from "../../i18n/locales";

export function getStaticPaths() {
  return getLocaleStaticPaths();
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const speakers = Object.entries(speakerData);

---

<Layout title="Speakers">
    <Container>
        <Sectionhead>
            <Fragment slot="subtitle">{t("We are excited to have an amazing lineup of speakers from around the world.")}</Fragment>
            <Fragment slot="title">{t("Our Speakers")}</Fragment>
            <Fragment slot="description"> </Fragment>
        </Sectionhead>

        <div class="relative mx-auto max-w-5xl px-6 lg:px-8" id="keynotes">
            <div class="mx-auto max-w-2xl lg:text-center">
                <h2 class="text-base font-semibold leading-7 text-pink">{t("Our Keynotes")}</h2>
                <p class="mt-2 text-3xl font-bold tracking-tight text-black dark:text-white sm:text-4xl">{t("Meet our Keynote speakers")}</p>
            </div>

            <div class="mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none">
                <dl class="grid max-w-xl grid-cols-1 gap-x-8 gap-y-16 lg:max-w-none lg:grid-cols-2">
                {
                    speakers.map(([key, value]) => {
                        const submissions = value.submissions.map(
                            (sub) => submissionsData[sub],
                        );
                        if (submissions[0].session_type == "Keynote") {
                            return (
                                <KeynoteComponent
                                    speakerInfo={value}
                                    speakerSubmissions={submissions}
                                />
                            );
                        }
                    })
                }
                </dl>
            </div>
        </div>

        <div class="mt-10 mx-auto max-w-2xl lg:text-center">
            <h2 class="text-base font-semibold leading-7 text-pink">
                {t("Meet our Speakers")}
            </h2>
            <p
                class="mt-2 text-3xl font-bold tracking-tight text-black dark:text-white sm:text-4xl"
            >
                {t("Our Speakers")}
            </p>
        </div>

        <div
            class="mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none justify-center"
        >
            <dl
                class="grid ax-w-none md:grid-cols-3 gap-x-1 gap-y-1 lg:max-w-none lg:grid-cols-5"
            >
                {
                    speakers.map(([key, value]) => {
                        const submissions = value.submissions.map(
                            (sub) => submissionsData[sub],
                        );
                        if (submissions[0].session_type != "Keynote") {
                            return (
                                <SpeakersComponent
                                    speakerInfo={value}
                                    speakerSubmissions={submissions}
                                />
                            );
                        }
                    })
                }
            </dl>
        </div>
    </Container>
</Layout>
